{% extends "base.html" %}
{% block title %}Admin Paneli{% endblock %}
{% block content %}
    <h1 style="color: #ff00ff;">ğŸ›¡ï¸ YÃ¶netim Paneli</h1>
    <p style="color: #00cccc;">HoÅŸ geldiniz, {{ current_user.username }}. Uygulama verilerini buradan yÃ¶netebilirsiniz.</p>
    
    {% if current_user.username == '4m!â‚º' %}
        <p style="color: #ff00ff; font-weight: bold;">ğŸš¨ SÃœPER YÃ–NETÄ°CÄ° HESABI AKTÄ°F.</p>
    {% endif %}

    <hr>

    <h2 style="color: #00cccc;">1. Konu YÃ¶netimi ({{ threads|length }} Konu)</h2>
    <div class="admin-section">
        {% for thread in threads %}
        <div class="admin-list-item">
            <span class="thread-info">
                <a href="{{ url_for('thread', thread_id=thread.id) }}">
                    {{ thread.title }}
                </a>
                (Yazar: {{ thread.author.username }})
            </span>
            
            <a href="{{ url_for('delete_thread', thread_id=thread.id) }}" 
               class="delete-link" 
               onclick="return confirm('Bu konuyu ve tÃ¼m yorumlarÄ± silmek istediÄŸinizden emin misiniz?');"
               style="color: #ff0000; font-weight: bold;">
               [ X Konuyu Sil ]
            </a>
        </div>
        {% else %}
        <p>HiÃ§ konu bulunamadÄ±.</p>
        {% endfor %}
    </div>

    <hr>

    <h2 style="color: #00cccc;">2. KullanÄ±cÄ± YÃ¶netimi ({{ users|length }} KullanÄ±cÄ±)</h2>
    <div class="admin-section">
        {% for user in users %}
        <div class="admin-list-item user-mod-item">
            <span class="user-info">
                **{{ user.username }}** (ID: {{ user.id }}) 
                {% if user.is_admin %}<span style="color: #ff00ff;">(YÃ–NETÄ°CÄ°)</span>{% endif %}
            </span>
            
            <span class="actions">
                {% if not user.is_admin %}
                    <a href="{{ url_for('promote_user', user_id=user.id) }}" 
                       style="color: #ffaa00; font-weight: bold; margin-right: 15px;">
                       [ YÃ¶netici Yap ]
                    </a>
                {% endif %}

                {% if not user.is_admin %}
                <a href="{{ url_for('delete_user', user_id=user.id) }}" 
                   class="delete-link" 
                   onclick="return confirm('{{ user.username }} kullanÄ±cÄ±sÄ±nÄ± kalÄ±cÄ± olarak silmek istediÄŸinizden emin misiniz? TÃ¼m iÃ§eriÄŸi silinecektir.');"
                   style="color: #ff0000; font-weight: bold;">
                   [ KullanÄ±cÄ±yÄ± Sil ]
                </a>
                {% else %}
                <span style="color: #555;">[ YÃ¶netici HesabÄ± ]</span>
                {% endif %}
            </span>
        </div>
        {% endfor %}
    </div>

    <hr>

    <h2 style="color: #00cccc;">3. Son Yorumlar (ModeratÃ¶r GÃ¶rÃ¼nÃ¼mÃ¼)</h2>
    <div class="admin-section">
        {% for comment in comments %}
        <div class="admin-list-item comment-mod-item">
            <span class="comment-content" style="max-width: 70%; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; display: inline-block;">
                **{{ comment.comment_author.username }}** (Konu: <a href="{{ url_for('thread', thread_id=comment.thread.id) }}" style="text-decoration: underline;">{{ comment.thread.title }}</a>) 
                - **Yorum:** {{ comment.content }}
            </span>
            
            <a href="{{ url_for('delete_comment', comment_id=comment.id) }}" 
               class="delete-link" 
               onclick="return confirm('Bu yorumu silmek istediÄŸinizden emin misiniz?');"
               style="color: #ff0000; font-weight: bold;">
               [ Yorumu Sil ]
            </a>
        </div>
        {% else %}
        <p>HiÃ§ yorum bulunamadÄ±.</p>
        {% endfor %}
    </div>

{% endblock content %}